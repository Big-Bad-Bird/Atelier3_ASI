<!DOCTYPE html>
<html>
    <head>
        <!-- Standard Meta -->
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <!-- Site Properties -->
        <title>Inscription</title>

        <link rel="stylesheet" type="text/css" href="lib/Semantic-UI-CSS-master/semantic.min.css">
        <link rel="stylesheet" type="text/css" href="custom.css">

<!--         <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
<!--         <script src="C:\Users\charr\Desktop\Atelier_2\lib\carhartl-jquery-cookie-92b7715\jquery.cookie.js"></script> -->
        <script type="text/javascript" src="js/jquery.cookie.js"></script>

    </head>

    <body>
        <div class="ui five column grid">
            <div class="row"></div>
            <div class="column"></div>
            <div class="column"></div>
            <div class="column">
                <form id="formAddUser" name="addUser" class="ui form" method="GET" onSubmit="create_u();return false">
                    <h3 class="ui dividing header">Add User Information</h3>
                    <div class="field">
                        <label>Name</label>
                        <input type="text" name="name" placeholder="Enter your Name">
                    </div>
                    <div class="field">
                        <label>Username</label>
                        <input type="text" name="username" placeholder="Enter your Username">
                    </div>
                    <div class="field">
                        <label>Password</label>
                        <input type="text" name="password" placeholder="Enter your Password">
                    </div>
                    <div class="field">
                        <label>Re-Password</label>
                        <input type="text" name="repassword" placeholder="Reenter your Password">
                    </div>
                    <div class="field">
                        <div class="ui checkbox field">
                            <input type="checkbox" name="pvisible">
                            <label>Make my profile visible</label>
                        </div>
                    </div>
                    <button class="ui button" type="submit" >Submit</button>
                </form>
            </div>
        </div>
        <script type="text/javascript">
            function create_u(){
                // Création de la requête
                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'http://127.0.0.1:8081/create-user');
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        var json = JSON.parse(xhr.responseText);
                        console.log(json);
                    }
                };

                // Récupération des données de l'utilisateur
                var form = document.getElementById("formAddUser");
                var name = form.elements[0].value; // Affiche "Prenom"
                var username = form.elements[1].value; // Affiche "Pseudo"
                var password = form.elements[2].value; // Affiche "Mdp"
                var user = {};
                user.name = name;
                user.username = username;
                user.password = password;

                var chaineJSON = JSON.stringify(user);

                // Envoi de la requête
                xhr.send(chaineJSON);
                
            };
                

            
        </script>
    </body>
</html>